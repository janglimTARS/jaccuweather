# Jaccuweather

A fully featured, modern weather website built as a Cloudflare Worker. Jaccuweather provides real-time weather forecasts, interactive radar maps, and detailed meteorological data using the Open-Meteo API and Ventusky for radar visualization.

## ğŸŒŸ Features

### Core Weather Features
- ğŸŒ¤ï¸ **Current Weather Display** - Real-time temperature, conditions, humidity, wind speed, UV index, and "feels like" temperature
- ğŸ“… **7-Day Forecast** - Extended weather forecast with daily highs, lows, precipitation totals, snowfall, wind speeds, and sunrise/sunset times
- â° **24-Hour Forecast** - Detailed hourly weather predictions with interactive charts showing temperature, precipitation probability, and conditions
- â„ï¸ **Weekly Snow Totals** - Displays cumulative snowfall predictions for the week when snow is in the forecast
- ğŸ“Š **Interactive Charts** - Visual temperature and precipitation charts for hourly forecasts

### Location Features
- ğŸ” **Location Search** - Search for any city or location worldwide with autocomplete
- ğŸ“ **Geolocation** - Automatically detects and displays weather for your current location
- â­ **Favorites System** - Save and quickly access your favorite locations
- ğŸ”„ **Reverse Geocoding** - Automatically displays location names for coordinates

### Radar & Maps
- ğŸ—ºï¸ **Interactive Weather Radar** - Embedded Ventusky precipitation map with real-time weather visualization
- ğŸ“ **Location-Based Radar** - Radar automatically centers on your current or searched location
- ğŸ¯ **Responsive Design** - Optimized radar view for both desktop and mobile devices
- ğŸ”’ **Safe Browsing** - Prevents accidental navigation when scrolling past the radar

### User Experience
- ğŸ¨ **Modern UI** - Beautiful gradient design with glassmorphism effects using Tailwind CSS
- ğŸ“± **Fully Responsive** - Optimized for desktop, tablet, and mobile devices
- âš¡ **Fast & Lightweight** - Deployed on Cloudflare's edge network for global performance
- ğŸŒ™ **Dark Theme** - Easy-on-the-eyes dark color scheme
- ğŸ“± **PWA Ready** - Apple touch icons and mobile web app support

### Technical Features
- ğŸ”„ **API Proxy** - Cloudflare Worker proxies API requests to avoid CORS issues
- ğŸ›¡ï¸ **Error Handling** - Comprehensive error handling with user-friendly messages
- ğŸ’¾ **Local Storage** - Favorites and preferences saved locally
- ğŸš« **Rate Limit Handling** - Graceful handling of API rate limits

## ğŸ› ï¸ Tech Stack

### Frontend
- **Vanilla JavaScript** - No framework dependencies, pure ES6+
- **Tailwind CSS** - Utility-first CSS framework for styling
- **Font Awesome** - Icon library for UI elements
- **Chart.js** - Interactive charts for weather data visualization

### Backend & Infrastructure
- **Cloudflare Workers** - Serverless deployment platform for edge computing
- **Open-Meteo API** - Free, open-source weather API for forecast data
- **Ventusky** - Interactive weather maps and radar visualization
- **BigDataCloud API** - Reverse geocoding service (free tier)

### Development Tools
- **Wrangler** - Cloudflare Workers CLI for development and deployment
- **Node.js** - Build tooling and dependencies
- **Sharp** - Image processing for favicon conversion

## ğŸ“¦ Installation & Setup

### Prerequisites
- Node.js (v16 or higher)
- npm or yarn
- Cloudflare account (for deployment)
- Git (for version control)

### Local Development

1. **Clone the repository:**
   ```bash
   git clone https://github.com/anglim3/jaccuweather.git
   cd jaccuweather
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Build the project:**
   ```bash
   npm run build
   ```
   This generates the Cloudflare Worker file (`src/index.js`) by embedding HTML, JavaScript, and assets.

4. **Run locally:**
   ```bash
   npm run dev
   ```
   This builds the project and starts a local development server using Wrangler.

### Deployment

1. **Authenticate with Cloudflare:**
   ```bash
   npx wrangler login
   ```

2. **Deploy to Cloudflare Workers:**
   ```bash
   npm run deploy
   ```
   This builds the project and deploys it to Cloudflare's edge network.

## ğŸ“ Project Structure

```
Weather/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html           # Main HTML template with embedded styles
â”‚   â”œâ”€â”€ app.js               # Frontend JavaScript (weather logic, UI interactions)
â”‚   â”œâ”€â”€ favicon.svg          # SVG favicon
â”‚   â””â”€â”€ apple-touch-icon.png # iOS home screen icon (auto-generated)
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.js             # Cloudflare Worker (auto-generated by build.js)
â”œâ”€â”€ build.js                 # Build script that embeds assets into worker
â”œâ”€â”€ convert-favicon.js       # Converts SVG favicon to PNG for iOS
â”œâ”€â”€ backup.sh                # Automated backup script for Git
â”œâ”€â”€ package.json             # Dependencies and npm scripts
â”œâ”€â”€ wrangler.toml            # Cloudflare Worker configuration
â””â”€â”€ README.md                # This file
```

## ğŸ”Œ API Endpoints

The Cloudflare Worker provides the following endpoints:

### Main Routes
- `/` or `/index.html` - Serves the main HTML page
- `/app.js` - Serves the JavaScript application
- `/favicon.svg` - SVG favicon
- `/apple-touch-icon.png` - iOS touch icon

### Proxy Routes
- `/api/forecast` - Proxies requests to Open-Meteo forecast API
- `/api/geocoding` - Proxies requests to Open-Meteo geocoding API
- `/api/reverse` - Proxies requests to BigDataCloud reverse geocoding API
- `/ventusky-proxy/*` - Proxies Ventusky requests with desktop user agent to avoid mobile app prompts

## ğŸ“‹ Features in Detail

### Current Weather Display
- **Temperature**: Current temperature in Fahrenheit
- **Feels Like**: Apparent temperature accounting for wind and humidity
- **Conditions**: Weather description (sunny, cloudy, rain, etc.)
- **Humidity**: Relative humidity percentage
- **Wind Speed**: Current wind speed in mph
- **UV Index**: Current UV index level
- **Sunrise/Sunset**: Times for the current day

### Hourly Forecast
- **24-Hour View**: Detailed forecast for the next 24 hours
- **Interactive Chart**: Visual temperature graph with Chart.js
- **Hour-by-Hour Data**: Temperature, conditions, precipitation probability, and wind speed
- **Modal View**: Click header to open expanded modal with full details

### Daily Forecast
- **7-Day Extended Forecast**: Complete week-long weather predictions
- **Daily Highs/Lows**: Maximum and minimum temperatures
- **Precipitation**: Daily precipitation totals and probability
- **Snowfall**: Daily snowfall accumulation
- **Wind**: Maximum wind speeds
- **Sunrise/Sunset**: Daily sunrise and sunset times
- **Modal View**: Click header to open expanded modal with full details

### Weekly Snow Totals
- **Automatic Display**: Only appears when snow is in the forecast
- **Cumulative Totals**: Shows total expected snowfall for the week
- **Daily Breakdown**: Individual day snowfall amounts

### Favorites System
- **Save Locations**: Add current location to favorites
- **Quick Access**: Dropdown menu for quick location switching
- **Local Storage**: Favorites persist across browser sessions
- **Remove Favorites**: Easy removal of saved locations

### Weather Radar
- **Ventusky Integration**: Embedded Ventusky precipitation map
- **Auto-Centering**: Automatically centers on current or searched location
- **Responsive Sizing**: Optimized aspect ratios for desktop and mobile
- **Interactive Controls**: Full Ventusky map controls (zoom, pan, layer switching)
- **Safe Scrolling**: Prevents accidental navigation when scrolling past the radar

## ğŸ”§ Development Workflow

### Making Changes

1. **Edit source files:**
   - `public/index.html` - HTML structure and styles
   - `public/app.js` - JavaScript functionality

2. **Test locally:**
   ```bash
   npm run dev
   ```
   Visit the local URL provided by Wrangler (typically `http://localhost:8787`)

3. **Build for production:**
   ```bash
   npm run build
   ```
   This creates the optimized worker file.

4. **Deploy:**
   ```bash
   npm run deploy
   ```

### Testing New Changes

Before deploying, always test locally using `npm run dev`. This:
- Builds the project
- Starts a local Cloudflare Worker
- Allows you to test all features without deploying
- Provides hot-reloading for development

## ğŸ’¾ Backup & Restore

### Automated Backup

The project includes an automated backup script (`backup.sh`) that:
- Commits all changes to Git
- Pushes to the remote repository
- Can be scheduled with cron for automatic backups

**To use the backup script:**
```bash
chmod +x backup.sh
./backup.sh
```

**To schedule automatic backups (example - daily at 2 AM):**
```bash
crontab -e
# Add this line:
0 2 * * * /path/to/Weather/backup.sh
```

### Manual Backup

1. **Commit changes:**
   ```bash
   git add .
   git commit -m "Your commit message"
   ```

2. **Push to remote:**
   ```bash
   git push origin main
   ```

### Restore from Backup

1. **Clone the repository:**
   ```bash
   git clone https://github.com/anglim3/jaccuweather.git
   cd jaccuweather
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Build and deploy:**
   ```bash
   npm run build
   npm run deploy
   ```

## ğŸŒ Browser Support

- **Modern Browsers**: Chrome, Firefox, Safari, Edge (latest versions)
- **Mobile Browsers**: iOS Safari, Chrome Mobile, Firefox Mobile
- **Required Features**:
  - ES6+ JavaScript support
  - Fetch API
  - Geolocation API (optional, falls back to default location)
  - Local Storage API
  - CSS Grid and Flexbox

## ğŸ”’ Security & Privacy

- **No API Keys Required**: Uses free, open APIs that don't require authentication
- **Client-Side Requests**: Weather API requests made directly from browser (uses user's IP)
- **Local Storage Only**: Favorites stored locally, never sent to servers
- **No Tracking**: No analytics or tracking scripts included
- **CORS Handling**: Cloudflare Worker proxies API requests to avoid CORS issues

## ğŸ› Troubleshooting

### Build Errors
- Ensure Node.js is v16 or higher
- Delete `node_modules` and run `npm install` again
- Check that all dependencies are installed

### Deployment Issues
- Verify Cloudflare authentication: `npx wrangler whoami`
- Check `wrangler.toml` configuration
- Ensure you have a Cloudflare Workers account

### API Errors
- Open-Meteo has rate limits - wait a moment and try again
- Check browser console for specific error messages
- Verify internet connection

### Radar Not Loading
- Check browser console for iframe errors
- Verify Ventusky proxy is working
- Try clearing browser cache

## ğŸ“ License

MIT License - feel free to use this project for personal or commercial purposes.

## ğŸ™ Credits

- **Weather Data**: [Open-Meteo](https://open-meteo.com/) - Free, open-source weather API
- **Weather Maps**: [Ventusky](https://www.ventusky.com/) - Interactive weather visualization
- **Icons**: [Font Awesome](https://fontawesome.com/) - Icon library
- **Styling**: [Tailwind CSS](https://tailwindcss.com/) - Utility-first CSS framework
- **Charts**: [Chart.js](https://www.chartjs.org/) - JavaScript charting library
- **Reverse Geocoding**: [BigDataCloud](https://www.bigdatacloud.com/) - Free reverse geocoding API

## ğŸ‘¤ Author

**Jack A** - Vibecoded with â¤ï¸

---

For issues, questions, or contributions, please open an issue on the [GitHub repository](https://github.com/anglim3/jaccuweather).
